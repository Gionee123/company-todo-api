const express = require("express")
const cors = require("cors")
const mongoose = require("mongoose")
require('dotenv').config(); // .env ‡§´‡§æ‡§á‡§≤ ‡§ï‡•ã load ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è

const server = express()
server.use(cors())
server.use(express.urlencoded({ extended: true }))
server.use(express.json())
server.use('/uploads/Images', express.static('uploads/Images'));


server.get("/", (request, response) => {
  response.send("Server Working Fine.....")
})

// backend url



// fronted url
require("./src/routes/frontend/profile.routes")(server)



server.get("*", (request, response) => {
  response.send("Page not found.....")
})




const MONGO_URI = 'mongodb+srv://yogeshsainijpr123:Gionee123@cluster0.nbzuobn.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0'; // ‡§Ø‡§æ ‡§ï‡•ã‡§à ‡§î‡§∞ database ‡§ú‡•ã ‡§Ü‡§™ use ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç


mongoose.connect(MONGO_URI)
  .then(() => {

    console.log('‚úÖ Local Database Connected Successfully');

    const PORT = 5000;
    server.listen(PORT, () => {
      console.log(`üöÄ Server running on http://localhost:${PORT}`);
    });
  })
  .catch((err) => {
    console.error('‚ùå Local DB Connection Failed:', err.message);
    process.exit(1);
  });